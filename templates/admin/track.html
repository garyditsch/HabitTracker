{% extends "base.html" %}

{% block title %}Track Habits - Habit Tracker{% endblock %}

{% block header_title %}Track Habits{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Date Navigation -->
    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
        <div class="flex items-center justify-between flex-wrap gap-4">
            <button id="prev-day" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition" aria-label="Go to previous day">
                â† Previous
            </button>

            <div class="text-center">
                <h2 id="current-date" class="text-2xl font-bold text-gray-900" aria-live="polite"></h2>
                <p id="date-label" class="text-sm text-gray-600 mt-1"></p>
            </div>

            <div class="flex gap-2">
                <button id="today-btn" class="px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition" aria-label="Go to today">
                    Today
                </button>
                <button id="next-day" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition" aria-label="Go to next day">
                    Next â†’
                </button>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loading" class="text-center py-12" role="status" aria-live="polite">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900" aria-hidden="true"></div>
        <p class="mt-4 text-gray-600">Loading habits...</p>
    </div>

    <!-- Empty State -->
    <div id="empty-state" class="hidden text-center py-12 bg-white rounded-lg shadow-sm">
        <div class="text-gray-400 text-6xl mb-4">ğŸ“</div>
        <h2 class="text-2xl font-semibold text-gray-700 mb-2">No Active Habits</h2>
        <p class="text-gray-600 mb-4">Create some habits in settings to start tracking!</p>
        <a href="/settings" class="inline-block px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition">
            Go to Settings
        </a>
    </div>

    <!-- Habits List -->
    <div id="habits-container" class="hidden">
        <div id="habits-list" class="space-y-3">
            <!-- Habit items will be inserted here by JavaScript -->
        </div>

        <!-- Save Button -->
        <div class="mt-6 flex justify-center">
            <button id="save-btn" class="px-8 py-3 bg-green-600 hover:bg-green-700 text-white text-lg font-semibold rounded-lg shadow-md transition transform hover:scale-105">
                Save Day
            </button>
        </div>

        <!-- Save Status -->
        <div id="save-status" class="hidden mt-4 p-4 rounded-lg text-center" role="alert" aria-live="assertive"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Pass the initial date from Flask template
    const initialDate = "{{ date }}";
</script>
<script src="{{ url_for('static', filename='js/tracking.js') }}"></script>
{% endblock %}
